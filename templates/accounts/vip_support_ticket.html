{% extends 'base.html' %}
{% load static %}

{% block title %}Support Center - VIP Dashboard{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Dashboard Layout -->
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-white shadow-lg dashboard-sidebar flex flex-col" style="width: 16rem;">
            <div class="p-6 flex-1 flex flex-col overflow-y-auto">
                <!-- User Profile Section -->
                <div class="mb-8 pt-12">
                    <div class="flex flex-col items-center text-center mb-4">
                        <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-base font-bold mb-3">
                            {{ vip_profile.full_name|first|upper }}
                        </div>
                        <h3 class="font-bold text-gray-900 text-lg">{{ vip_profile.full_name }}</h3>
                        <p class="text-sm text-gray-500">ID: {{ vip_profile.member_id }}</p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="space-y-3 mb-8">
                    <button class="w-full bg-red-600 hover:bg-red-700 text-white text-sm font-medium py-2 px-4 rounded-md transition-colors mb-3 flex items-center justify-center gap-2">
                        <i class="fas fa-shield-alt"></i>
                        Verify KYC
                    </button>
                    <button class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors">
                        <i class="fas fa-gem"></i>
                        MERIDIAN VIP
                    </button>
                </div>

                <!-- Main Menu -->
                <div class="mb-6">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 sidebar-heading">MAIN MENU</h3>
                    <nav class="space-y-2">
                        <a href="{% url 'accounts:vip_dashboard' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-home"></i>
                            Dashboard
                        </a>
                        <a href="{% url 'accounts:vip_transactions' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-exchange-alt"></i>
                            Transactions
                        </a>
                        <a href="{% url 'accounts:vip_cards' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-credit-card"></i>
                            Cards
                        </a>
                    </nav>
                </div>

                <!-- Transfers -->
                <div class="mb-6">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 sidebar-heading">TRANSFERS</h3>
                    <nav class="space-y-2">
                        <a href="{% url 'accounts:vip_transfer_local' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-paper-plane"></i>
                            Local Transfer
                        </a>
                        <a href="{% url 'accounts:vip_transfer_international' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-globe"></i>
                            International Wire
                        </a>
                        <a href="{% url 'accounts:vip_deposit' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-plus"></i>
                            Deposit
                        </a>
                    </nav>
                </div>

                <!-- Services -->
                <div class="mb-6">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 sidebar-heading">SERVICES</h3>
                    <nav class="space-y-2">
                        <a href="{% url 'accounts:vip_loan_services' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-file-invoice-dollar"></i>
                            Loan Request
                        </a>
                        <a href="{% url 'accounts:vip_loan_history' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-history"></i>
                            Loan History
                        </a>
                        <a href="{% url 'accounts:vip_irs_tax_refund' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-receipt"></i>
                            IRS Tax Refund
                        </a>
                    </nav>
                </div>

                <!-- Account -->
                <div class="mb-6">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 sidebar-heading">ACCOUNT</h3>
                    <nav class="space-y-2">
                        <a href="{% url 'accounts:vip_account_settings' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                            <i class="fas fa-user"></i>
                            Account & Settings
                        </a>
                        <a href="{% url 'accounts:vip_support_ticket' %}" class="nav-link flex items-center gap-3 py-2 px-3 rounded-lg bg-blue-50 text-blue-600 font-medium">
                            <i class="fas fa-comment"></i>
                            Support Ticket
                        </a>
                    </nav>
                </div>

                <!-- Footer -->
                <div class="mt-auto pt-6 border-t border-gray-200">
                    <p class="text-xs text-gray-500 copyright-text">Â© 2025 Meridian Asset Logistics</p>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 overflow-y-auto bg-gray-50 main-content">
            <div class="w-full p-8">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">Support Center</h1>
                    <p class="text-gray-600">Dashboard > Support</p>
                </div>

                <!-- Support Card -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
                    <!-- Section Header -->
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-cog text-white text-sm"></i>
                        </div>
                        <h2 class="text-xl font-semibold text-gray-900">Submit a Support Ticket</h2>
                    </div>
                    
                    <p class="text-gray-600 mb-8">We're here to help. Tell us about your issue and we'll find a solution.</p>

                    <!-- Support Icon -->
                    <div class="flex justify-center mb-8">
                        <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-question text-white text-2xl"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Support Form -->
                    <form method="post" id="supportForm">
                        {% csrf_token %}
                        
                        <!-- Ticket Title -->
                        <div class="mb-6">
                            <label for="title" class="block text-sm font-medium text-gray-700 mb-2">Ticket Title</label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <i class="fas fa-bookmark text-sm"></i>
                                </span>
                                <input type="text" 
                                       id="title" 
                                       name="title" 
                                       class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                       placeholder="Briefly describe your issue" 
                                       required>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Be specific to help us understand your issue.</p>
                        </div>

                        <!-- Priority Level -->
                        <div class="mb-6">
                            <label for="priority" class="block text-sm font-medium text-gray-700 mb-2">Priority Level</label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <i class="fas fa-flag text-sm"></i>
                                </span>
                                <select id="priority" name="priority" class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white appearance-none">
                                    <option value="low">Low Priority</option>
                                    <option value="medium">Medium Priority</option>
                                    <option value="high">High Priority</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                                <div class="absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none">
                                    <i class="fas fa-chevron-down text-gray-400"></i>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Select based on urgency of your request!</p>
                        </div>

                        <!-- Description -->
                        <div class="mb-6">
                            <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Describe Your Issue</label>
                            <div class="relative">
                                <span class="absolute left-3 top-4 text-gray-400">
                                    <i class="fas fa-comment text-sm"></i>
                                </span>
                                <textarea id="description" 
                                          name="description" 
                                          rows="6"
                                          class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" 
                                          placeholder="Please provide all relevant details about your issue so we can help you better" 
                                          required></textarea>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Include any relevant details that might help us resolve your issue.</p>
                        </div>

                        <!-- Support Information -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <div class="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                    <i class="fas fa-info text-white text-xs"></i>
                                </div>
                                <div class="text-blue-800 text-sm">
                                    <strong>Support Information</strong> Our support team typically responds within 24 hours. For urgent matters, please select 'High Priority' and we'll do our best to assist you sooner.
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors">
                            <i class="fas fa-paper-plane"></i>
                            Submit Ticket
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Light Theme Support for Sidebar */
html.light .dashboard-sidebar h1,
html.light .dashboard-sidebar h2,
html.light .dashboard-sidebar h3,
html.light .dashboard-sidebar h4,
html.light .dashboard-sidebar h5,
html.light .dashboard-sidebar h6,
html.light .dashboard-sidebar p,
html.light .dashboard-sidebar span,
html.light .dashboard-sidebar div {
    color: #374151 !important;
    font-weight: 500 !important;
}

html.light .sidebar-heading {
    color: #1f2937 !important;
    font-weight: 700 !important;
}

html.light .nav-link {
    color: #374151 !important;
    font-weight: 500 !important;
}

html.light .nav-link:hover {
    color: #1f2937 !important;
    font-weight: 600 !important;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('supportForm');
    
    form.addEventListener('submit', function(e) {
        const title = document.getElementById('title').value.trim();
        const description = document.getElementById('description').value.trim();
        
        if (!title) {
            e.preventDefault();
            alert('Please provide a ticket title.');
            return;
        }
        
        if (!description) {
            e.preventDefault();
            alert('Please provide a description of your issue.');
            return;
        }
        
        // Show loading state
        const submitButton = form.querySelector('button[type="submit"]');
        submitButton.disabled = true;
        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
    });
});
</script>
{% endblock %}
